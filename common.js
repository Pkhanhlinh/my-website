// Language translations (excluding proper nouns: Kalynk An Tuá»‡, Om.Vibe, Flamingo Äáº¡i Láº£i)
const translations = {
    vi: {
        // Navigation
        home: "Owner",
        homestay: "Homestay",
        healing: "Healing",
        villa: "Flamingo Resort",
        healthy: "Healthy",
        // Main content
        kham_pha_title: "CÃ¡c lÄ©nh vá»±c mÃ  Kalynk An Tuá»‡ cÃ³ thá»ƒ káº¿t ná»‘i cÃ¹ng báº¡n",
        contact_info: "(whatsApp zalo: 0777998858 - 0911858998 - 0966758689)",
        homestay_title: "OM.VIBE RETREAT MIEU LAKE",
        homestay_subtitle: "Homestay Há»“ Miá»…u - ThÃ¢n - TÃ¢m - TrÃ­",
        healing_title: "THIá»€N THá»¤ Äá»˜NG",
        healing_subtitle: "Báº±ng Ã‚m Thanh Chá»¯a LÃ nh",
        villa_title: "FLAMINGO RESORT",
        villa_subtitle: "Booking Villa ChÃ­nh Chá»§",
        healthy_title: "Trá»‹ liá»‡u",
        healthy_subtitle: "cÆ¡ thá»ƒ",
        facebook: "Facebook",
        instagram: "Instagram",
        // Founder section
        founder_title: "Láº¯ng lÃ²ng nghe hÆ¡i thá»Ÿ, Tháº¥y mÃ¬nh trong tinh khÃ´ng!",
        founder_greeting: "ChÃ o báº¡n, má»i báº¡n cá»© gá»i mÃ¬nh lÃ  Kalynk An Tuá»‡ nhÃ©!",
        founder_desc_1: 'MÃ¬nh ghÃ© thÄƒm tháº¿ giá»›i nÃ y vá»›i tÆ° cÃ¡ch lÃ  má»™t "ngÆ°á»i há»c viá»‡c" â€” há»c cÃ¡ch thÆ°Æ¡ng, cÃ¡ch hiá»ƒu vÃ  há»c cÃ¡ch láº¯ng nghe. Tháº¿ nÃªn, náº¿u báº¡n Ä‘ang mang má»™t tÃºi tÃ¢m sá»± trÄ©u náº·ng, cá»© ngá»“i xuá»‘ng Ä‘Ã¢y, mÃ¬nh luÃ´n sáºµn lÃ²ng nghe tiáº¿ng lÃ²ng cá»§a báº¡n nhÆ° nghe má»™t báº£n nháº¡c Ä‘á»i Ä‘áº§y mÃ u sáº¯c.',
        founder_desc_2: "MÃ¬nh vá»‘n lÃ  má»™t kiáº¿n trÃºc sÆ° á»Ÿ TÃ¢y Há»“, nhÆ°ng lÄƒn lá»™n Ä‘áº¿n táº­n Há»“ Miá»…u Ä‘á»ƒ tÃ¬m bÃ¬nh yÃªn vÃ¬ mÃ¬nh khÃ´ng cáº§n há»“ quÃ¡ rá»™ng lá»›n, chá»‰ cáº§n há»“ Ä‘á»§ láº·ng Ä‘á»ƒ soi tháº¥y chÃ­nh mÃ¬nh.",
        founder_desc_3: 'Nghe thÃ¬ cÃ³ váº» "to tÃ¡t", nhÆ°ng thá»±c ra cÃ´ng viá»‡c cá»§a mÃ¬nh giáº£n Ä‘Æ¡n láº¯m: mÃ¬nh má»i báº¡n ngá»“i xuá»‘ng, thá»Ÿ tháº­t khÃª, vÃ  Ä‘á»ƒ Ã¢m thanh Ä‘Æ°a báº¡n vÃ o tráº¡ng thÃ¡i thiá»n thá»¥ Ä‘á»™ng.',
    },
    en: {
        home: "Home",
        homestay: "Homestay",
        healing: "Healing",
        villa: "Flamingo Resort",
        healthy: "Healthy",
        kham_pha_title: "Areas Kalynk An Tuá»‡ can connect with you",
        contact_info: "(whatsApp zalo: 0777998858 - 0911858998 - 0966758689)",
        homestay_title: "OM.VIBE RETREAT MIEU LAKE",
        homestay_subtitle: "Homestay Há»“ Miá»…u - Body - Mind - Spirit",
        healing_title: "ACTIVE MEDITATION",
        healing_subtitle: "With Healing Sounds",
        villa_title: "FLAMINGO RESORT",
        villa_subtitle: "Direct Booking",
        healthy_title: "Therapy",
        healthy_subtitle: "for body",
        facebook: "Facebook",
        instagram: "Instagram",
        founder_title: "Listen to your breath, See yourself in the infinite!",
        founder_greeting: "Hello, please call me Kalynk An Tuá»‡!",
        founder_desc_1: 'I visit this world as a "learner" â€” learning to love, to understand and to listen.',
        founder_desc_2: "I was originally an architect in Tay Ho, but I rolled to Mieu Lake to find peace.",
        founder_desc_3: 'It may sound "big", but actually my work is very simple: I invite you to sit down, breathe gently.',
    },
    fr: {
        home: "Accueil",
        homestay: "Homestay",
        healing: "GuÃ©rison",
        villa: "Flamingo Resort",
        healthy: "SantÃ©",
        kham_pha_title: "Domaines oÃ¹ Kalynk An Tuá»‡ peut vous connecter",
        contact_info: "(whatsApp zalo: 0777998858 - 0911858998 - 0966758689)",
        homestay_title: "OM.VIBE RETREAT MIEU LAKE",
        homestay_subtitle: "Homestay Há»“ Miá»…u - Corps - Esprit - Ã‚me",
        healing_title: "MÃ‰DITATION ACTIVE",
        healing_subtitle: "Avec des Sons GuÃ©risseurs",
        villa_title: "FLAMINGO RESORT",
        villa_subtitle: "RÃ©servation Directe",
        healthy_title: "ThÃ©rapie",
        healthy_subtitle: "du corps",
        facebook: "Facebook",
        instagram: "Instagram",
        founder_title: "Ã‰coutez votre souffle, Voyez-vous dans l'infini!",
        founder_greeting: "Bonjour, appelez-moi Kalynk An Tuá»‡!",
        founder_desc_1: 'Je visite ce monde en tant qu\'apprenant â€” apprendre Ã  aimer, Ã  comprendre et Ã  Ã©couter.',
        founder_desc_2: "J'Ã©tais Ã  l'origine un architecte Ã  Tay Ho, mais j'ai roulÃ© vers le lac Mieu pour trouver la paix.",
        founder_desc_3: 'Cela peut paraÃ®tre "grand", mais en fait mon travail est trÃ¨s simple: je vous invite Ã  vous asseoir.',
    },
    ja: {
        home: "ãƒ›ãƒ¼ãƒ ",
        homestay: "ãƒ›ãƒ¼ãƒ ã‚¹ãƒ†ãƒ¼",
        healing: "ãƒ¡ãƒ­ãƒ‡ã‚£",
        villa: "Flamingo Resort",
        healthy: "ãƒ˜ãƒ«ã‚¹",
        kham_pha_title: "Kalynk An Tuá»‡ãŒçš†ã•ã‚“ã¨ç¹‹ãŒã‚‹åˆ†é‡",
        contact_info: "(whatsApp zalo: 0777998858 - 0911858998 - 0966758689)",
        homestay_title: "OM.VIBE RETREAT MIEU LAKE",
        homestay_subtitle: "ãƒ›ãƒ¼ãƒ ã‚¹ãƒ†ãƒ¼ - ä½“ãƒ»å¿ƒãƒ»é­‚",
        healing_title: "èƒ½å‹•çš„ç‘æƒ³",
        healing_subtitle: "ç™’ã—ã®éŸ³ã§",
        villa_title: "FLAMINGO RESORT",
        villa_subtitle: "ç›´æ¥äºˆç´„",
        healthy_title: "ã‚»ãƒ©ãƒ”ãƒ¼",
        healthy_subtitle: "ãƒœãƒ‡ã‚£",
        facebook: "Facebook",
        instagram: "Instagram",
        founder_title: "å‘¼å¸ã«è€³ã‚’å‚¾ã‘ã€ç„¡é™ã®ä¸­ã§è‡ªåˆ†ã‚’è¦‹ã‚ˆã†ï¼",
        founder_greeting: "ã“ã‚“ã«ã¡ã¯ã€Kalynk An Tuá»‡ã¨å‘¼ã‚“ã§ãã ã•ã„ï¼",
        founder_desc_1: 'ç§ã¯ã€Œå­¦ã³æ‰‹ã€ã¨ã—ã¦ã“ã®ä¸–ç•Œã‚’è¨ªã‚Œã¦ã„ã¾ã™ â€” æ„›ã™ã‚‹ã“ã¨ã€ã‚’ç†è§£ã™ã‚‹ã“ã¨ã€ãã—ã¦è´ãã“ã¨ã‚’å­¦ã¶ã€‚',
        founder_desc_2: "ç§ã¯å…ƒã€…Tay Hoã®å»ºç¯‰å®¶ã§ã—ãŸãŒã€å¹³å’Œã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã«Mieuæ¹–ã¾ã§è»¢ãŒã‚Šè½ã¡ã¾ã—ãŸã€‚",
        founder_desc_3: 'ãã‚Œã¯ã€Œå¤§ããã€èã“ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ç§ã®ä»•äº‹ã¯å®Ÿéš›ã«ã¯éå¸¸ã«ç°¡å˜ã§ã™ï¼šåº§ã£ã¦å„ªã—ãå‘¼å¸ã™ã‚‹ã€‚',
    },
    ko: {
        home: "í™ˆ",
        homestay: "í™ˆìŠ¤í…Œì´",
        healing: "íë§",
        villa: "Flamingo Resort",
        healthy: "í—¬ìŠ¤",
        kham_pha_title: "Kalynk An Tuá»‡ê°€ ì—¬ëŸ¬ë¶„ê³¼ ì—°ê²°ë  ìˆ˜ ìˆëŠ” ë¶„ì•¼",
        contact_info: "(whatsApp zalo: 0777998858 - 0911858998 - 0966758689)",
        homestay_title: "OM.VIBE RETREAT MIEU LAKE",
        homestay_subtitle: "í™ˆìŠ¤í…Œì´ - ëª¸, ë§ˆìŒ, ì˜í˜¼",
        healing_title: "ëŠ¥ë™ì  ëª…ìƒ",
        healing_subtitle: "ì¹˜ìœ  ìŒì„±ìœ¼ë¡œ",
        villa_title: "FLAMINGO RESORT",
        villa_subtitle: "ì§ì ‘ ì˜ˆì•½",
        healthy_title: "ì¹˜ë£Œ",
        healthy_subtitle: "ì‹ ì²´",
        facebook: "Facebook",
        instagram: "Instagram",
        founder_title: "í˜¸í¡ì— ê·€ ê¸°ìš¸ì´ê³ , ë¬´í•œ ì†ì—ì„œ ìì‹ ì„ ë°œê²¬í•˜ì„¸ìš”!",
        founder_greeting: "ì•ˆë…•í•˜ì„¸ìš”, Kalynk An Tuá»‡ë¼ê³  ë¶ˆëŸ¬ì£¼ì„¸ìš”!",
        founder_desc_1: 'ì €ëŠ” "ë°°ìš°ëŠ” ì‚¬ëŒ"ìœ¼ë¡œì„œ ì´ ì„¸ìƒì„ ë°©ë¬¸í•©ë‹ˆë‹¤ â€” ì‚¬ë‘í•˜ëŠ” ë²•, ì´í•´í•˜ëŠ” ë²•, ê·¸ë¦¬ê³  ê²½ì²­í•˜ëŠ” ë²•ì„ ë°°ìš°ê³  ìˆìŠµë‹ˆë‹¤ã€‚',
        founder_desc_2: "ì €ëŠ” ì›ë˜ Tay Hoì˜ ê±´ì¶•ê°€ì˜€ì§€ë§Œ, í‰í™”ë¥¼ ì°¾ê¸° ìœ„í•´ Mieu í˜¸ìˆ˜ê¹Œì§€ êµ´ëŸ¬ê°”ìŠµë‹ˆë‹¤ã€‚",
        founder_desc_3: 'ë“¤ìœ¼ë©´ "ê±°ì°½í•œ" ê²ƒì²˜ëŸ¼ ë“¤ë¦´ ìˆ˜ ìˆì§€ë§Œ, ì‹¤ì œë¡œ ì €ì˜ ì¼ì€ ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤ï¼šì•‰ì•„ì„œ ë¶€ë“œëŸ½ê²Œ ìˆ¨ì„ ì‰¬ëŠ” ê²ƒã€‚',
    },
    zh: {
        home: "é¦–é¡µ",
        homestay: "æ°‘å®¿",
        healing: "ç–—æ„ˆ",
        villa: "Flamingo Resort",
        healthy: "å¥åº·",
        kham_pha_title: "Kalynk An Tuá»‡å¯ä»¥ä¸æ‚¨è¿æ¥çš„é¢†åŸŸ",
        contact_info: "(whatsApp zalo: 0777998858 - 0911858998 - 0966758689)",
        homestay_title: "OM.VIBE RETREAT MIEU LAKE",
        homestay_subtitle: "æ°‘å®¿ - èº«å¿ƒçµ",
        healing_title: "ä¸»åŠ¨å†¥æƒ³",
        healing_subtitle: "ç”¨ç–—æ„ˆçš„å£°éŸ³",
        villa_title: "FLAMINGO RESORT",
        villa_subtitle: "ç›´æ¥é¢„è®¢",
        healthy_title: "æ²»ç–—",
        healthy_subtitle: "èº«ä½“",
        facebook: "Facebook",
        instagram: "Instagram",
        founder_title: "å€¾å¬å‘¼å¸ï¼Œåœ¨æ— é™ä¸­çœ‹è§è‡ªå·±ï¼",
        founder_greeting: "æ‚¨å¥½ï¼Œè¯·å«æˆ‘Kalynk An Tuá»‡ï¼",
        founder_desc_1: 'æˆ‘ä»¥"å­¦ä¹ è€…"çš„èº«ä»½æ¥åˆ°è¿™ä¸ªä¸–ç•Œ â€” å­¦ä¹ çˆ±ã€å­¦ä¹ ç†è§£ã€å­¦ä¹ å€¾å¬ã€‚',
        founder_desc_2: "æˆ‘åŸæœ¬æ˜¯è¥¿æ¹–çš„å»ºç­‘å¸ˆï¼Œä½†æˆ‘æ¼‚åˆ°å¦™æ¹–å¯»æ‰¾å¹³é™ã€‚",
        founder_desc_3: 'å¬èµ·æ¥å¯èƒ½"å¾ˆå®å¤§"ï¼Œä½†å®é™…ä¸Šæˆ‘çš„å·¥ä½œéå¸¸ç®€å•ï¼šåä¸‹è½»è½»å‘¼å¸ã€‚',
    },
    ru: {
        home: "Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ",
        homestay: "Ğ“Ğ¾ÑÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ´Ğ¾Ğ¼",
        healing: "Ğ˜ÑÑ†ĞµĞ»ĞµĞ½Ğ¸Ğµ",
        villa: "Flamingo Resort",
        healthy: "Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ",
        kham_pha_title: "ĞĞ±Ğ»Ğ°ÑÑ‚Ğ¸, Ğ³Ğ´Ğµ Kalynk An Tuá»‡ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ Ğ²Ğ°Ğ¼Ğ¸ ÑĞ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ",
        contact_info: "(whatsApp zalo: 0777998858 - 0911858998 - 0966758689)",
        homestay_title: "OM.VIBE RETREAT MIEU LAKE",
        homestay_subtitle: "Ğ“Ğ¾ÑÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ´Ğ¾Ğ¼ - Ğ¢ĞµĞ»Ğ¾ - Ğ Ğ°Ğ·ÑƒĞ¼ - Ğ”ÑƒÑˆĞ°",
        healing_title: "ĞĞšĞ¢Ğ˜Ğ’ĞĞĞ¯ ĞœĞ•Ğ”Ğ˜Ğ¢ĞĞ¦Ğ˜Ğ¯",
        healing_subtitle: "Ğ¡ Ğ˜ÑÑ†ĞµĞ»ÑÑÑ‰Ğ¸Ğ¼Ğ¸ Ğ—Ğ²ÑƒĞºĞ°Ğ¼Ğ¸",
        villa_title: "FLAMINGO RESORT",
        villa_subtitle: "ĞŸÑ€ÑĞ¼Ğ¾Ğµ Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ",
        healthy_title: "Ğ¢ĞµÑ€Ğ°Ğ¿Ğ¸Ñ",
        healthy_subtitle: "Ñ‚ĞµĞ»Ğ°",
        facebook: "Facebook",
        instagram: "Instagram",
        founder_title: "Ğ¡Ğ»ÑƒÑˆĞ°Ğ¹Ñ‚Ğµ ÑĞ²Ğ¾Ñ‘ Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğµ, Ğ£Ğ²Ğ¸Ğ´ÑŒÑ‚Ğµ ÑĞµĞ±Ñ Ğ² Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾ÑÑ‚Ğ¸!",
        founder_greeting: "Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ½Ğ°Ğ·Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ¼ĞµĞ½Ñ Kalynk An Tuá»‡!",
        founder_desc_1: 'Ğ¯ Ğ¿Ğ¾ÑĞµÑ‰Ğ°Ñ ÑÑ‚Ğ¾Ñ‚ Ğ¼Ğ¸Ñ€ ĞºĞ°Ğº "ÑƒÑ‡ĞµĞ½Ğ¸Ğº" â€” ÑƒÑ‡ÑƒÑÑŒ Ğ»ÑĞ±Ğ¸Ñ‚ÑŒ, Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ¸ ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒã€‚',
        founder_desc_2: "Ğ¯ Ğ¸Ğ·Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ±Ñ‹Ğ» Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ² Ğ¢Ğ°Ğ¹ Ğ¥Ğ¾, Ğ½Ğ¾ Ñ ÑĞºĞ°Ñ‚Ğ¸Ğ»ÑÑ Ğº Ğ¾Ğ·ĞµÑ€Ñƒ ĞœÑŒĞµÑƒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾ĞºĞ¾Ğ¹ã€‚",
        founder_desc_3: 'Ğ­Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ²ÑƒÑ‡Ğ°Ñ‚ÑŒ "Ğ³Ñ€Ğ¾Ğ¼Ğ¾Ğ·Ğ´ĞºĞ¾", Ğ½Ğ¾ Ğ½Ğ° ÑĞ°Ğ¼Ğ¾Ğ¼ Ğ´ĞµĞ»Ğµ Ğ¼Ğ¾Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ°ï¼šÑĞµÑÑ‚ÑŒ Ğ¸ Ğ¼ÑĞ³ĞºĞ¾ Ğ´Ñ‹ÑˆĞ°Ñ‚ÑŒã€‚',
    }
};

let currentLanguage = 'vi';

// Language names in their native scripts
const languageNames = {
    vi: 'Tiáº¿ng Viá»‡t ğŸ‡»ğŸ‡³',
    en: 'English ğŸ‡ºğŸ‡¸',
    fr: 'FranÃ§ais ğŸ‡«ğŸ‡·',
    ja: 'æ—¥æœ¬èª ğŸ‡¯ğŸ‡µ',
    ko: 'í•œêµ­ì–´ ğŸ‡°ğŸ‡·',
    zh: 'ä¸­æ–‡ ğŸ‡¨ğŸ‡³',
    ru: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹ ğŸ‡·ğŸ‡º'
};

function changeLanguage(lang) {
    currentLanguage = lang;
    
    // Update all translatable elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update elements with specific IDs
    const khamPhaTitle = document.querySelector('#kham-pha h2');
    const khamPhaSmall = document.querySelector('#kham-pha small');
    const founderTitle = document.querySelector('#founder h2');
    const founderGreeting = document.querySelector('#founder p');
    const founderDesc1 = document.querySelector('#founder p:nth-of-type(3)');
    const founderDesc2 = document.querySelector('#founder p:nth-of-type(4)');
    const founderDesc3 = document.querySelector('#founder p:nth-of-type(5)');
    
    // Map keys to elements
    const elementMap = {
        'kham_pha_title': khamPhaTitle,
        'contact_info': khamPhaSmall,
        'founder_title': founderTitle,
        'founder_greeting': founderGreeting,
        'founder_desc_1': founderDesc1,
        'founder_desc_2': founderDesc2,
        'founder_desc_3': founderDesc3
    };
    
    Object.keys(elementMap).forEach(key => {
        const element = elementMap[key];
        if (element && translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Save preference
    localStorage.setItem('preferredLanguage', lang);
    
    // Update button text
    const langBtn = document.getElementById('lang-button');
    if (langBtn) {
        langBtn.innerHTML = languageNames[lang] + ' â–¼';
    }
    
    // Close dropdown after selection
    const dropdown = langBtn ? langBtn.closest('.dropdown') : null;
    if (dropdown) {
        dropdown.classList.remove('show');
    }
}

function toggleLanguageDropdown(event) {
    event.stopPropagation();
    const dropdown = event.target.closest('.dropdown');
    if (dropdown) {
        dropdown.classList.toggle('show');
    }
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    if (!event.target.closest('.dropdown')) {
        document.querySelectorAll('.dropdown').forEach(dropdown => {
            dropdown.classList.remove('show');
        });
    }
});

document.addEventListener('DOMContentLoaded', function() {
    // Add header content with navigation buttons
    const headerPlaceholder = document.getElementById('header-placeholder');
    const existingMobileHeader = document.getElementById('mobile-header');
    
    if (headerPlaceholder) {
        headerPlaceholder.innerHTML = `
<div style="display: flex; justify-content: space-between; align-items: center;">
    <div style="font-size: 3em; font-weight: 900; font-family: 'Times New Roman', 'Arial Unicode MS', Arial, sans-serif; text-transform: uppercase;">KALYNK_AN TUá»†</div>
    <div class="nav-buttons">
        <a href="index.html" class="button" data-i18n="home">Owner</a>
        <a href="homestay.html" class="button" data-i18n="homestay">Homestay</a>
        <a href="healing.html" class="button" data-i18n="healing">Healing</a>
        <a href="villa.html" class="button" data-i18n="villa">Flamingo Resort</a>
        <a href="healthy.html" class="button" data-i18n="healthy">Healthy</a>
    </div>
</div>
`;
    }

    // Check for saved language preference
    const savedLang = localStorage.getItem('preferredLanguage');
    if (savedLang && translations[savedLang]) {
        currentLanguage = savedLang;
    }

    // Add language switcher
    const khamPhaSection = document.querySelector('#kham-pha');
    const headerDiv = document.querySelector('#header-placeholder > div') || document.querySelector('header > div');
    
    if (!document.getElementById('language-switcher')) {
        const langSwitcher = document.createElement('div');
        langSwitcher.id = 'language-switcher';
        langSwitcher.innerHTML = `
            <div class="dropdown">
                <button id="lang-button" class="lang-btn" onclick="toggleLanguageDropdown(event)">
                    Tiáº¿ng Viá»‡t ğŸ‡»ğŸ‡³ â–¼
                </button>
                <div class="dropdown-content">
                    <a href="#" onclick="changeLanguage('vi'); return false;">Tiáº¿ng Viá»‡t ğŸ‡»ğŸ‡³</a>
                    <a href="#" onclick="changeLanguage('en'); return false;">English ğŸ‡ºğŸ‡¸</a>
                    <a href="#" onclick="changeLanguage('fr'); return false;">FranÃ§ais ğŸ‡«ğŸ‡·</a>
                    <a href="#" onclick="changeLanguage('ja'); return false;">æ—¥æœ¬èª ğŸ‡¯ğŸ‡µ</a>
                    <a href="#" onclick="changeLanguage('ko'); return false;">í•œêµ­ì–´ ğŸ‡°ğŸ‡·</a>
                    <a href="#" onclick="changeLanguage('zh'); return false;">ä¸­æ–‡ ğŸ‡¨ğŸ‡³</a>
                    <a href="#" onclick="changeLanguage('ru'); return false;">Ğ ÑƒÑÑĞºĞ¸Ğ¹ ğŸ‡·ğŸ‡º</a>
                </div>
            </div>
        `;
        
        // On mobile, insert language switcher into existing mobile-header
        if (window.innerWidth <= 600 && existingMobileHeader) {
            const langMobile = existingMobileHeader.querySelector('.language-switcher-mobile');
            if (langMobile) {
                langMobile.appendChild(langSwitcher);
            }
        } else if (headerDiv) {
            headerDiv.insertBefore(langSwitcher, headerDiv.firstChild);
        } else if (khamPhaSection) {
            khamPhaSection.insertBefore(langSwitcher, khamPhaSection.firstChild);
        }
        
        // Apply saved language
        changeLanguage(currentLanguage);
    }

    // Add active class to current page button
    let currentPage = window.location.pathname.split('/').pop() || 'index.html';
    let activeLink = document.querySelector(`a[href="${currentPage}"]`);
    if (activeLink) {
        activeLink.classList.add('active');
    }
});

// Make functions available globally
window.changeLanguage = changeLanguage;
window.toggleLanguageDropdown = toggleLanguageDropdown;

// Simple toggle between EN and VI for mobile button
function toggleLanguage() {
    const currentLang = localStorage.getItem('preferredLanguage') || 'vi';
    const newLang = currentLang === 'vi' ? 'en' : 'vi';
    changeLanguage(newLang);
    
    // Update button text
    const langBtn = document.getElementById('lang-toggle-mobile');
    if (langBtn) {
        const langText = langBtn.querySelector('.lang-text');
        if (langText) {
            langText.textContent = newLang === 'vi' ? 'VI' : 'EN';
        }
        if (newLang === 'vi') {
            langBtn.classList.add('vi');
        } else {
            langBtn.classList.remove('vi');
        }
    }
    
    // Also update the header button if exists
    const headerBtn = document.getElementById('lang-toggle');
    if (headerBtn) {
        const headerLangText = headerBtn.querySelector('.lang-text');
        if (headerLangText) {
            headerLangText.textContent = newLang === 'vi' ? 'VI' : 'EN';
        }
    }
}

window.toggleLanguage = toggleLanguage;

// Instagram Embed Fix - Handle failed embeds
function fixInstagramEmbeds() {
    const instagramEmbeds = document.querySelectorAll('.instagram-media');
    
    instagramEmbeds.forEach((embed) => {
        // Check if embed failed to load (has placeholder SVG content)
        const placeholder = embed.querySelector('svg');
        const loadingText = embed.querySelector('[style*="color:#3897f0"]');
        
        // If we see placeholder content, it's not loaded properly
        if (placeholder || (embed.innerHTML.includes('instagram') && embed.innerHTML.length < 500)) {
            const permalink = embed.getAttribute('data-instgrm-permalink');
            if (permalink) {
                // Create fallback display
                embed.innerHTML = `
                    <div class="instagram-media-fallback">
                        <span class="video-icon">ğŸ¬</span>
                        <p>Video tá»« Instagram</p>
                        <a href="${permalink}" target="_blank">Xem video trÃªn Instagram ğŸ“±</a>
                    </div>
                `;
            }
        }
    });
}

// Run on page load
document.addEventListener('DOMContentLoaded', function() {
    // Wait for Instagram embed script to load
    setTimeout(fixInstagramEmbeds, 3000);
    
    // Also fix on window load
    window.addEventListener('load', fixInstagramEmbeds);
});
